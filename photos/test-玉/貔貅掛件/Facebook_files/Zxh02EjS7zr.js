;/*FB_PKG_DELIM*/

__d("LSUpdateBackupsTable",["LSAppendDataTraceAddon","LSArrayGetObjectAt","LSDeleteBackupOnClient","LSFlushDataTrace.nop","LSIsEncryptionVersionSecure","LSIsMobileClient","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsUpdateBackupsTableStoredProcedure] Beginning execution."),a[5]!==f?c.sp(b("LSAppendDataTraceAddon"),a[5],c.i64.cast([0,1467]),c.i64.cast([0,2]),f,f):c.resolve()},function(a){return c.sp(b("LSIsMobileClient")).then(function(a){return a=a,d[1]=a[0],a})},function(a){return d[1]?d[2]=!0:d[2]=!1,d[2]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[12]=c.createArray(),f!==f?d[13]=(d[12].push(f),d[12]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[12],c.i64.cast([0,3]))):c.resolve()},function(e){return a[0]?c.seq([function(a){return c.ftr(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}).next().then(function(a,b){b=a.done;a=a.value;return b?d[12]=!1:(a.item,d[12]=!0)})},function(e){return d[12]&&!0?c.seq([function(a){return c.islc(c.ftr(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,e){var g=a.done;a=a.value;return g?(g=[f,f,f,f,f,c.i64.cast([0,1]),f,f,f,f,f,f,f,c.i64.cast([0,20])],d[16]=g[0],d[17]=g[1],d[18]=g[2],d[19]=g[3],d[20]=g[4],d[21]=g[5],d[22]=g[6],d[23]=g[7],d[24]=g[8],d[25]=g[9],d[26]=g[10],d[27]=g[11],d[28]=g[12],d[29]=g[13],g):(e=a.item,c.seq([function(a){return d[37]=e.backupTenancy,d[36]=e.encryptionVersion,c.i64.neq(f,f)?c.resolve(d[33]=f):c.seq([function(a){return d[38]=c.createArray(),c.sp(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[39]=a[0],a})},function(a){return d[39]?d[48]=(d[38].push(c.i64.cast([0,0])),d[38]):0,c.sp(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[40]=a[0],a})},function(a){return d[40]?d[48]=(d[38].push(c.i64.cast([0,2])),d[38]):0,c.sp(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[41]=a[0],a})},function(a){return d[41]?d[48]=(d[38].push(c.i64.cast([0,3])),d[38]):0,c.sp(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[42]=a[0],a})},function(a){return d[42]?d[48]=(d[38].push(c.i64.cast([0,4])),d[38]):0,d[43]=c.createArray(),d[44]=c.i64.of_int32(d[38].length),c.i64.gt(d[44],c.i64.cast([0,0]))?c.loopAsync(d[44],function(a){return d[48]=a,c.seq([function(a){return c.ntop("Array",b("LSArrayGetObjectAt"),d[38],d[48]).then(function(a){return a=a,d[49]=a[0],d[50]=a[1],a})},function(a){return d[51]=(d[43].push(d[49]),d[43])}])}):c.resolve()},function(a){return c.seq([function(a){return d[48]=c.createArray(),d[49]=c.i64.of_int32(d[43].length),c.i64.gt(d[49],c.i64.cast([0,0]))?c.loopAsync(d[49],function(a){return d[51]=a,c.seq([function(a){return c.ntop("Array",b("LSArrayGetObjectAt"),d[43],d[51]).then(function(a){return a=a,d[52]=a[0],d[53]=a[1],a})},function(a){return d[54]=(d[48].push(c.i64.to_string(d[52])),d[48])}])}):c.resolve()},function(a){return d[50]=d[48].join(","),d[45]=d[50]}])},function(a){return d[43].some(function(a){return c.i64.eq(d[36],a)})?d[46]=d[36]:d[46]=f,c.i64.neq(d[46],f)?d[47]=d[46]:d[47]=f,d[33]=d[47]}])},function(a){return c.i64.neq(d[33],f)?d[34]=d[33]:d[34]=c.i64.cast([0,0]),c.i64.neq(d[37],f)?d[35]=d[37]:d[35]=c.i64.cast([0,1]),a=[e.backupId,e.deviceId,e.mailboxRootKeyBlob,e.ocmfClientStateBlob,d[34],d[35],e.epochAuthPublicKeyBlob,e.epochAuthPrivateKeyBlob,e.devicePublicKeyBlob,e.devicePrivateKeyBlob,e.epochStoragePublicKeyBlob,e.epochStoragePrivateKeyBlob,e.obliviousValidationTokenBlob,e.authorityLevel],d[16]=a[0],d[17]=a[1],d[18]=a[2],d[19]=a[3],d[20]=a[4],d[21]=a[5],d[22]=a[6],d[23]=a[7],d[24]=a[8],d[25]=a[9],d[26]=a[10],d[27]=a[11],d[28]=a[12],d[29]=a[13],a}]))})},function(e){return d[31]=!1,d[32]=c.i64.of_int32(a[3].length),c.i64.gt(d[32],c.i64.cast([0,0]))?c.loopAsync(d[32],function(e){return d[33]=e,c.seq([function(e){return c.ntop("Array",b("LSArrayGetObjectAt"),a[3],d[33]).then(function(a){return a=a,d[34]=a[0],d[35]=a[1],a})},function(a){return d[36]=d[34].get("device_id"),d[34],d[31]=d[31]||c.i64.eq(d[17],d[36])}])}):c.resolve()},function(e){return d[31]?c.resolve():(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsUpdateBackupsTableStoredProcedure] Client device id not in the list of device ids associated with the backupDeleting backup client state"),c.sp(b("LSDeleteBackupOnClient"),f,f,!1,a[5],f,!0))}]):c.resolve()},function(a){return c.fe(c.ftr(c.db.table(184).fetch(),function(a){return!0}),function(a){return a["delete"]()})},function(e){return d[14]=c.i64.of_int32(a[2].length),c.i64.gt(d[14],c.i64.cast([0,0]))?c.loopAsync(d[14],function(e){return d[16]=e,c.seq([function(e){return c.ntop("Array",b("LSArrayGetObjectAt"),a[2],d[16]).then(function(a){return a=a,d[17]=a[0],d[18]=a[1],a})},function(a){return d[19]=d[17].get("virtual_devices"),d[17],d[19]?d[20]=!1:d[20]=!0,d[20]?c.resolve():(d[21]=c.i64.of_int32(d[19].length),c.i64.gt(d[21],c.i64.cast([0,0]))?c.loopAsync(d[21],function(a){return d[22]=a,c.seq([function(a){return c.ntop("Array",b("LSArrayGetObjectAt"),d[19],d[22]).then(function(a){return a=a,d[23]=a[0],d[24]=a[1],a})},function(a){return d[25]=d[23].get("virtual_device_id"),d[23],d[26]=d[23].get("virtual_device_type"),d[23],d[27]=d[23].get("creation_time"),d[23],d[28]=d[23].get("device_created_on"),d[23],d[29]=d[23].get("cloud_service_account"),d[23],d[30]=d[23].get("hsm_pin_normalization_status"),d[23],d[31]=d[23].get("requires_hsm_migration"),d[23],d[32]=d[17].get("backup_id"),d[17],c.ct(c.ftr(c.db.table(184).fetch(),function(a){return c.i64.eq(a.backupId,d[32])&&c.blobs.eq(a.virtualDeviceId,d[25])})).then(function(a){return d[33]=a})},function(a){return c.i64.eq(d[33],c.i64.cast([0,0]))?(d[34]=d[17].get("backup_id"),d[17],c.db.table(184).add({pk:void 0,backupId:d[34],virtualDeviceId:d[25],virtualDeviceType:d[26],creationTime:d[27],deviceCreatedOn:d[28]})):c.resolve()}])}):c.resolve())}])}):c.resolve()},function(a){return c.fe(c.db.table(172).fetch(),function(a){return a["delete"]()})},function(e){return d[15]=c.i64.of_int32(a[1].length),c.i64.gt(d[15],c.i64.cast([0,0]))?c.seq([function(e){return c.ntop("Array",b("LSArrayGetObjectAt"),a[1],c.i64.cast([0,0])).then(function(a){return a=a,d[16]=a[0],d[17]=a[1],a})},function(a){return d[18]=d[16].get("backup_id"),d[16],d[19]=d[16].get("backup_tenancy"),d[16],c.fe(c.ftr(c.db.table(172).fetch([[[c.i64.cast([0,1])]]]),function(a){return c.i64.eq(a.pk,c.i64.cast([0,1]))&&c.i64.lt(a.authorityLevel,c.i64.cast([0,80]))}),function(a){return a["delete"]()})},function(b){return c.db.table(172).add({pk:c.i64.cast([0,1]),backupId:d[18],authorityLevel:c.i64.cast([0,80]),backupTenancy:d[19],isUserOptedOut:a[6],hasOtcEligibleDevices:a[7]})}]):c.seq([function(a){return c.fe(c.ftr(c.db.table(172).fetch([[[c.i64.cast([0,1])]]]),function(a){return c.i64.eq(a.pk,c.i64.cast([0,1]))&&c.i64.lt(a.authorityLevel,c.i64.cast([0,80]))}),function(a){return a["delete"]()})},function(b){return c.db.table(172).add({pk:c.i64.cast([0,1]),authorityLevel:c.i64.cast([0,80]),isUserOptedOut:a[6],hasOtcEligibleDevices:a[7]})}])}]):c.seq([function(e){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsUpdateBackupsTableStoredProcedure] Fetch backup task did not succeed."),a[5]!==f?c.seq([function(d){return a[5]!==f?c.sp(b("LSAppendDataTraceAddon"),a[5],c.i64.cast([0,85]),c.i64.cast([0,2]),"[EncryptedBackups][LSEncryptedBackupsUpdateBackupsTableStoredProcedure] Fetch backup task did not succeed.",f):c.resolve()},function(a){return c.sp(b("LSIsMobileClient")).then(function(a){return a=a,d[15]=a[0],a})},function(a){return d[15]?d[16]=!0:d[16]=!1,d[16]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[17]=c.createArray(),f!==f?d[18]=(d[17].push(f),d[17]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[17],c.i64.cast([0,3]))):c.resolve()}]):c.resolve()},function(e){return d[12]=c.createArray(),a[5]!==f?d[15]=(d[12].push(a[5]),d[12]):0,c.nop(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsUpdateBackupsTableStoredProcedure","Fetch backup task did not succeed.",d[12],c.i64.cast([0,3]))},function(a){return c.fe(c.db.table(172).fetch(),function(a){return a["delete"]()})},function(a){return c.fe(c.ftr(c.db.table(172).fetch([[[c.i64.cast([0,1])]]]),function(a){return c.i64.eq(a.pk,c.i64.cast([0,1]))&&c.i64.lt(a.authorityLevel,c.i64.cast([0,80]))}),function(a){return a["delete"]()})},function(a){return c.db.table(172).add({pk:c.i64.cast([0,1]),backupId:c.i64.cast([-1,4294967295]),authorityLevel:c.i64.cast([0,80]),hasOtcEligibleDevices:!1})},function(e){return a[5]!==f?c.seq([function(d){return a[5]!==f?c.sp(b("LSAppendDataTraceAddon"),a[5],c.i64.cast([0,85]),c.i64.cast([0,2]),"The flow did not succeed",f):c.resolve()},function(a){return c.sp(b("LSIsMobileClient")).then(function(a){return a=a,d[15]=a[0],a})},function(a){return d[15]?d[16]=!0:d[16]=!1,d[16]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[17]=c.createArray(),f!==f?d[18]=(d[17].push(f),d[17]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[17],c.i64.cast([0,3]))):c.resolve()}]):c.resolve()},function(d){return a[5]!==f?c.nop(b("LSFlushDataTrace.nop"),a[5]):c.resolve()},function(a){return c.sp(b("LSIsMobileClient")).then(function(a){return a=a,d[13]=a[0],a})},function(a){return d[13]?d[14]=!0:d[14]=!1,d[14]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[15]=c.createArray(),f!==f?d[16]=(d[15].push(f),d[15]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[15],c.i64.cast([0,3]))):c.resolve()}])},function(e){return c.seq([function(d){return a[5]!==f?c.sp(b("LSAppendDataTraceAddon"),a[5],c.i64.cast([0,84]),c.i64.cast([0,2]),f,f):c.resolve()},function(a){return c.sp(b("LSIsMobileClient")).then(function(a){return a=a,d[12]=a[0],a})},function(a){return d[12]?d[13]=!0:d[13]=!1,d[13]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[14]=c.createArray(),f!==f?d[15]=(d[14].push(f),d[14]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[14],c.i64.cast([0,3]))):c.resolve()}])},function(d){return a[5]!==f?c.nop(b("LSFlushDataTrace.nop"),a[5]):c.resolve()},function(a){return c.sp(b("LSIsMobileClient")).then(function(a){return a=a,d[3]=a[0],a})},function(a){return d[3]?d[4]=!0:d[4]=!1,d[4]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[12]=c.createArray(),f!==f?d[13]=(d[12].push(f),d[12]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[12],c.i64.cast([0,3]))):c.resolve()},function(a){return d[5]=c.i64.of_float(Date.now()),d[7]="Finishing execution. Execution time: ",d[8]=c.i64.to_string(c.i64.sub(d[5],d[0])),d[10]=" ms",d[6]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsUpdateBackupsTableStoredProcedure] ",d[6],d[7],d[6],d[8],d[6],d[10]].join("")),d[9]=",",d[11]=c.createArray(),f!==f?d[12]=(d[11].push(f),d[11]):0,c.nop(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsUpdateBackupsTableStoredProcedure",[d[7],d[9],d[8],d[9],d[10]].join(""),d[11],c.i64.cast([0,4]))}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("GroupsCometSpamSettingsModalDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5373252056055165"}),null);
__d("GroupsCometSpamSettingsModalDialogQuery$Parameters",["GroupsCometSpamSettingsModalDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("GroupsCometSpamSettingsModalDialogQuery_facebookRelayOperation"),metadata:{},name:"GroupsCometSpamSettingsModalDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("GroupsCometSpamSettingsModalDialog.entrypoint",["GroupsCometSpamSettingsModalDialogQuery$Parameters","JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){a=a.groupID;return{queries:{queryReference:{parameters:c("GroupsCometSpamSettingsModalDialogQuery$Parameters"),variables:{groupID:a}}}}},root:c("JSResourceForInteraction")("GroupsCometSpamSettingsModalDialog.react").__setRef("GroupsCometSpamSettingsModalDialog.entrypoint")};g["default"]=a}),98);